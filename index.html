<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="//userapi.com/js/api/openapi.js" type="text/javascript" charset="windows-1251"></script>
</head>
<body>
<script type="text/javascript">
    VK.init({
        apiId: 6142437
    });
</script>

<div id="vk_auth"></div>
<button onclick="doStuff()">Click me</button>
<script type="text/javascript">
//    VK.Widgets.Auth('vk_auth', {
//        width: 300,
//        onAuth: function (data) {
//            console.log(data);
//
//            var url = 'https://oauth.vk.com/authorize?client_id=6142437&scope=8196&display=popup&redirect_uri=https://test-vkontakte.herokuapp.com/other.html&response_type=token';
//
////            window.location.href = url;
////            return;
//
//            var newWin = window.open(url, 'vk-login', 'width=300,height=180')
//            newWin.onload = function() {
//                var hash = newWin.location.hash
//                console.log(hash)
//            }
//        }
//    });

function doStuff() {
    var base_url = '';
    var track_configuration_id = 1;
    var period = 'day';

    var redirectUrl = base_url + '/other.html?mode=share_track_best_times&' + 'track_configuration_id=' + track_configuration_id + '&period=' + period;
    var accessScope = 8196; // photo + wall

// window.open(redirectUrl + '#access_token=1d0acc347f5176b74a1701eef92df166d5db25abffb6febc19c7ce43915681acaef703ff23b17edc6e599&expires_in=86400&user_id=441620294');
    window.open('https://oauth.vk.com/authorize?client_id=' + 6142437 + '&scope=' + accessScope + '&display=popup&redirect_uri=' + redirectUrl + '&response_type=token', 'vk-access', 'width=400,height=200');
}


</script>
</body>
</html>